apiVersion: v1
kind: ConfigMap
metadata:
  name: redpanda-config
  labels:
    app: redpanda
data:
  redpanda.yaml: |
    # Configuration to ensure Redpanda uses correct memory and stable settings
    redpanda:
      # Memory configuration for Seastar engine
      # Set to 900M (90% of 1Gi container limit) to prevent OOM kills
      memory: 900M 
      node_id: 0
      seed_servers: []
      developer_mode: true
      unsafe_bypass_fsync: true
      # Listeners (these are primarily overridden by ENV variables in the deployment)
      kafka_api:
        - address: 0.0.0.0
          port: 29092
      admin_api:
        - address: 0.0.0.0
          port: 9644
      schema_registry:
        - address: 0.0.0.0
          port: 8081
